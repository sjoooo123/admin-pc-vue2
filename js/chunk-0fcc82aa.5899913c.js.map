{"version":3,"sources":["webpack:///./src/views/home/componentDemo/tree/index.vue?76fe","webpack:///src/views/home/componentDemo/tree/index.vue","webpack:///./src/views/home/componentDemo/tree/index.vue?c17b","webpack:///./src/views/home/componentDemo/tree/index.vue","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/views/home/componentDemo/tree/index.vue?ac5f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","appendTop","_v","data","defaultProps","scopedSlots","_u","key","fn","ref","node","edit","staticStyle","nativeOn","$event","type","indexOf","_k","keyCode","editCommit","model","value","callback","$$v","$set","expression","cancel","_s","name","level","id","append","_e","remove","staticRenderFns","component","$","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-0fcc82aa.5899913c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"org\"},[_c('div',{staticClass:\"topBar\"},[_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.appendTop}},[_vm._v(\"新增单位\")])],1),_c('el-tree',{staticClass:\"mt10\",attrs:{\"data\":_vm.data,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"accordion\":\"\",\"highlight-current\":\"\",\"expand-on-click-node\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[(!data.edit)?[_c('span',[_c('i',{staticClass:\"el-icon-folder-opened\"}),_vm._v(_vm._s(data.name))]),_c('span',{staticClass:\"el-btn\"},[(data.level < 2 && data.id != 1)?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-plus\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.append(data); }}}):_vm._e(),(data.level > 0)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.edit(data); }}}):_vm._e(),(data.level > 0)?_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.remove(node, data); }}}):_vm._e()],1)]:[_c('el-input',{ref:\"inputs\",staticStyle:{\"width\":\"120px\"},attrs:{\"size\":\"small\",\"maxlength\":\"8\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.editCommit(data)}},model:{value:(data.name),callback:function ($$v) {_vm.$set(data, \"name\", $$v)},expression:\"data.name\"}}),_c('span',{staticClass:\"el-btn\"},[_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-check\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.editCommit(data); }}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-close\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function () { return _vm.cancel(data); }}})],1)]],2)}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!--部门管理-->\n    <div class=\"org\">\n        <div class=\"topBar\">\n            <el-button type=\"success\" icon=\"el-icon-plus\" @click=\"appendTop\">新增单位</el-button>\n        </div>\n        <el-tree\n            class=\"mt10\"\n            :data=\"data\"\n            node-key=\"id\"\n            :props=\"defaultProps\"\n            accordion\n            highlight-current\n            :expand-on-click-node=\"false\"\n        >\n            <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n                <template v-if=\"!data.edit\">\n                    <span\n                        ><i class=\"el-icon-folder-opened\"></i\n                        >{{ data.name }}</span\n                    >\n                    <span class=\"el-btn\">\n                        <el-button\n                            v-if=\"data.level < 2 && data.id != 1\"\n                            type=\"success\"\n                            icon=\"el-icon-plus\"\n                            circle\n                            size=\"mini\"\n                            @click=\"() => append(data)\"\n                        >\n                        </el-button>\n                        <el-button\n                            v-if=\"data.level > 0\"\n                            type=\"primary\"\n                            icon=\"el-icon-edit\"\n                            circle\n                            size=\"mini\"\n                            @click=\"() => edit(data)\"\n                        >\n                        </el-button>\n                        <el-button\n                            v-if=\"data.level > 0\"\n                            type=\"danger\" icon=\"el-icon-delete\" circle\n                            size=\"mini\"\n                            @click=\"() => remove(node, data)\"\n                        >\n                        </el-button>\n                    </span>\n                </template>\n                <template v-else>\n                    <el-input\n                        ref=\"inputs\"\n                        style=\"width: 120px\"\n                        size=\"small\"\n                        maxlength=\"8\"\n                        v-model=\"data.name\"\n                        @keyup.enter.native=\"editCommit(data)\"\n                    />\n                    <span class=\"el-btn\">\n                        <el-button\n                            type=\"success\"\n                            icon=\"el-icon-check\"\n                            circle\n                            size=\"mini\"\n                            @click=\"() => editCommit(data)\"\n                        >\n                        </el-button>\n                        <el-button\n                            type=\"danger\"\n                            icon=\"el-icon-close\"\n                            circle\n                            size=\"mini\"\n                            @click=\"() => cancel(data)\"\n                        >\n                        </el-button>\n                    </span>\n                </template>\n            </span>\n        </el-tree>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'org',\n\tdata() {\n\t\treturn {\n\t\t\t// 组织机构数据\n\t\t\tdefaultProps: {\n\t\t\t\tchildren: 'children',\n\t\t\t\tlabel: 'name',\n            },\n            data: [], // 部门数据\n            options: [], // 部门数据-供选择\n\t\t}\n\t},\n\tmounted() {\n        this.deptAllLists()\n\t},\n\tmethods: {\n        // 获取部门数据\n        async deptAllLists() {\n\t\t\tconst res = await this.$svc.api_tree_post()\n\t\t\tif (!res) return // res为undefined，出错中止\n\t\t\t// 添加上pid\n\t\t\t// 第一层-单位层\n\t\t\tres.data.data.forEach((item, index) => {\n\t\t\t\titem.pid = 0\n\t\t\t\t// 选择部门使用\n\t\t\t\tthis.options[index] = {}\n\t\t\t\tthis.options[index].value = item.id\n\t\t\t\tthis.options[index].label = item.name\n\n\t\t\t\t// 第二层-部门层\n\t\t\t\tif (item.children && item.children.length > 0) {\n\t\t\t\t\t// 选择部门使用\n\t\t\t\t\tthis.options[index].children = []\n\n\t\t\t\t\titem.children.forEach((c, i) => {\n\t\t\t\t\t\t// 选择部门使用\n\t\t\t\t\t\tthis.options[index].children[i] = {}\n\t\t\t\t\t\tthis.options[index].children[i].value = c.id\n\t\t\t\t\t\tthis.options[index].children[i].label = c.name\n\n\t\t\t\t\t\tc.pid = item.id\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 部门修改使用\n\t\t\tthis.data = res.data.data\n\t\t\t// 清空标识\n\t\t\tdelete this.deptFlag\n        },\n\t\tappend(data) {\n\t\t\tconst newChild = {\n\t\t\t\tpid: data.id,\n\t\t\t\tname: '',\n\t\t\t\tedit: true,\n\t\t\t\tlevel: data.level + 1,\n\t\t\t}\n\t\t\tif (!data.children) {\n\t\t\t\tthis.$set(data, 'children', [])\n\t\t\t}\n\t\t\tdata.children.push(newChild)\n\t\t\tthis.deptFlag = 'add' // 新增标识\n\t\t\t// 输入聚焦\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t//正确写法\n\t\t\t\tthis.$refs.inputs.focus()\n\t\t\t})\n\t\t},\n\t\tappendTop() {\n\t\t\tconst newChild = {\n\t\t\t\tpid: 0,\n\t\t\t\tname: '',\n\t\t\t\tedit: true,\n\t\t\t\tlevel: 1,\n\t\t\t\tchildren: [],\n\t\t\t}\n\t\t\tthis.data.push(newChild)\n\t\t\tthis.deptFlag = 'add' // 新增标识\n\t\t\t// 输入聚焦\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t//正确写法\n\t\t\t\tthis.$refs.inputs.focus()\n\t\t\t})\n\t\t},\n\t\tedit(data) {\n\t\t\tthis.$set(data, 'edit', true)\n\t\t\tthis.deptFlag = 'edit' // 新增标识\n\t\t},\n\t\teditCommit(data) {\n\t\t\tif (data.name.length == 0) {\n\t\t\t\tthis.$message.error('不能为空!')\n\t\t\t\treturn\n\t\t\t}\n\t\t\tdata.edit = false\n\t\t\t// 区分新增与修改\n\t\t\tthis.deptFlag == 'add' && this.commitAdd(data)\n\t\t\tthis.deptFlag == 'edit' && this.commitEdit(data)\n\t\t},\n\t\t// 取消\n\t\tcancel(data) {\n\t\t\tthis.$set(data, 'edit', false)\n\t\t\t// 组织架构刷新\n\t\t\tthis.deptAllLists()\n\t\t},\n\t\t// 提交新增\n\t\tasync commitAdd(data) {\n\t\t\tconst params = {\n\t\t\t\tpid: data.pid,\n\t\t\t\tname: data.name,\n\t\t\t\tlevel: data.level,\n\t\t\t}\n\t\t\tconst res = await this.$svc.admin_dept_ad_post(params)\n\t\t\tif (!res) return // res为undefined，出错中止\n\t\t\tthis.$message.success('新增完成!')\n\t\t\t// 清空标识\n\t\t\tdelete this.deptFlag\n\t\t\t// 组织架构刷新\n\t\t\tthis.deptAllLists()\n\t\t},\n\t\t// 提交修改\n\t\tasync commitEdit(data) {\n\t\t\tconst params = {\n\t\t\t\tpid: data.pid,\n\t\t\t\tid: data.id,\n\t\t\t\tname: data.name,\n\t\t\t\tlevel: data.level,\n\t\t\t}\n\t\t\tconst res = await this.$svc.admin_dept_up_post(params)\n\t\t\tif (!res) return // res为undefined，出错中止\n\t\t\tthis.$message.success('修改成功!')\n\t\t\t// 清空标识\n\t\t\tdelete this.deptFlag\n\t\t},\n\t\tremove(node, data) {\n\t\t\tconst parent = node.parent\n\t\t\tconst children = parent.data.children || parent.data\n\t\t\tconst index = children.findIndex((d) => d.id === data.id)\n\t\t\tchildren.splice(index, 1)\n\t\t\tthis.commit(node)\n        },\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.topBar {\n    position: relative;\n\tbackground-color: #fff;\n\tmin-height: 50px;\n\tbox-sizing: border-box;\n\tpadding: 10px;\n}\n.topBar .title {\n\tmargin: 0;\n\tline-height: 40px;\n\tfont-weight: bold;\n\tfont-size: 16px;\n}\n.topBar .bar-right{\n    position: absolute;\n    top: 10px;\n    right: 10px;\n}\n\n.org /deep/ .el-tree {\n\tpadding: 10px;\n\tborder: 1px solid #f4f4f4;\n}\n.org /deep/ .el-tree .el-tree-node__content {\n\theight: auto;\n\tline-height: 2.8;\n}\n.el-btn {\n\tmargin-left: 10px;\n\tmargin-right: 10px;\n}\n.el-button--mini.is-circle {\n\tpadding: 3px;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=36bb9990&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=36bb9990&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"36bb9990\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=36bb9990&lang=scss&scoped=true&\""],"sourceRoot":""}