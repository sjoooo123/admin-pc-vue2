(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fcc82aa"],{"09cc":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"org"},[n("div",{staticClass:"topBar"},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.appendTop}},[e._v("新增单位")])],1),n("el-tree",{staticClass:"mt10",attrs:{data:e.data,"node-key":"id",props:e.defaultProps,accordion:"","highlight-current":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,a=t.data;return n("span",{staticClass:"custom-tree-node"},[a.edit?[n("el-input",{ref:"inputs",staticStyle:{width:"120px"},attrs:{size:"small",maxlength:"8"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCommit(a)}},model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"data.name"}}),n("span",{staticClass:"el-btn"},[n("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",size:"mini"},on:{click:function(){return e.editCommit(a)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(){return e.cancel(a)}}})],1)]:[n("span",[n("i",{staticClass:"el-icon-folder-opened"}),e._v(e._s(a.name))]),n("span",{staticClass:"el-btn"},[a.level<2&&1!=a.id?n("el-button",{attrs:{type:"success",icon:"el-icon-plus",circle:"",size:"mini"},on:{click:function(){return e.append(a)}}}):e._e(),a.level>0?n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(){return e.edit(a)}}}):e._e(),a.level>0?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(){return e.remove(i,a)}}}):e._e()],1)]],2)}}])})],1)},a=[],c=n("1da1"),r=(n("96cf"),n("159b"),n("b0c0"),n("c740"),n("a434"),{name:"org",data:function(){return{defaultProps:{children:"children",label:"name"},data:[],options:[]}},mounted:function(){this.deptAllLists()},methods:{deptAllLists:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$svc.api_tree_post();case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:n.data.data.forEach((function(t,n){t.pid=0,e.options[n]={},e.options[n].value=t.id,e.options[n].label=t.name,t.children&&t.children.length>0&&(e.options[n].children=[],t.children.forEach((function(i,a){e.options[n].children[a]={},e.options[n].children[a].value=i.id,e.options[n].children[a].label=i.name,i.pid=t.id})))})),e.data=n.data.data,delete e.deptFlag;case 8:case"end":return t.stop()}}),t)})))()},append:function(e){var t=this,n={pid:e.id,name:"",edit:!0,level:e.level+1};e.children||this.$set(e,"children",[]),e.children.push(n),this.deptFlag="add",this.$nextTick((function(){t.$refs.inputs.focus()}))},appendTop:function(){var e=this,t={pid:0,name:"",edit:!0,level:1,children:[]};this.data.push(t),this.deptFlag="add",this.$nextTick((function(){e.$refs.inputs.focus()}))},edit:function(e){this.$set(e,"edit",!0),this.deptFlag="edit"},editCommit:function(e){0!=e.name.length?(e.edit=!1,"add"==this.deptFlag&&this.commitAdd(e),"edit"==this.deptFlag&&this.commitEdit(e)):this.$message.error("不能为空!")},cancel:function(e){this.$set(e,"edit",!1),this.deptAllLists()},commitAdd:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={pid:e.pid,name:e.name,level:e.level},n.next=3,t.$svc.admin_dept_ad_post(i);case 3:if(a=n.sent,a){n.next=6;break}return n.abrupt("return");case 6:t.$message.success("新增完成!"),delete t.deptFlag,t.deptAllLists();case 9:case"end":return n.stop()}}),n)})))()},commitEdit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={pid:e.pid,id:e.id,name:e.name,level:e.level},n.next=3,t.$svc.admin_dept_up_post(i);case 3:if(a=n.sent,a){n.next=6;break}return n.abrupt("return");case 6:t.$message.success("修改成功!"),delete t.deptFlag;case 8:case"end":return n.stop()}}),n)})))()},remove:function(e,t){var n=e.parent,i=n.data.children||n.data,a=i.findIndex((function(e){return e.id===t.id}));i.splice(a,1),this.commit(e)}}}),s=r,o=(n("ee9c"),n("2877")),d=Object(o["a"])(s,i,a,!1,null,"36bb9990",null);t["default"]=d.exports},1610:function(e,t,n){},c740:function(e,t,n){"use strict";var i=n("23e7"),a=n("b727").findIndex,c=n("44d2"),r="findIndex",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),c(r)},ee9c:function(e,t,n){"use strict";n("1610")}}]);
//# sourceMappingURL=chunk-0fcc82aa.5899913c.js.map